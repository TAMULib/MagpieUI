<br/>
<div class="container-fluid" ng-controller="AnnotateController">

	<div class="row" ng-if="document.notes">
	Rejection notes: {{document.notes}}
	</div>
	
	<div class="col-7 col-lg-7 document-pane">	
		<div role="tabpanel" class="span6">
			<h2>Document</h2>
			<ul class="nav nav-tabs" role="tablist">
				<li role="presentation" class="active"><a href="#txtTab" aria-controls="txtTab" role="tab" data-toggle="tab">Text</a></li>
				<li role="presentation"><a href="#pdfTab" aria-controls="pdfTab" role="tab" data-toggle="tab">PDF</a></li>
			</ul>
			<div class="tab-content">
				<div role="tabpanel" class="tab-pane active" id="txtTab">	
					<div class="well">{{txt.verbage}}</div>
				</div>
				<div role="tabpanel" class="tab-pane" id="pdfTab">
					<object data="{{pdf.uri}}" type="application/pdf" width="100%" height="600"></object>
				</div>
			</div>
		</div>
	</div>
	
	<div class="col-5 col-lg-5 metadata-pane">
		<h2>Metadata</h2>
		<div class="row">			
			<h3>Abstract</h3>
			<textarea ng-model="document.metadata.abstract" rows="5" cols="25" style="width:100%;"></textarea>			
		</div>
		<div class="row">			
			<span class="h3 pull left">
				Committee members
			</span>
			<span class="top" title="Remove committee chair field"><a ng-if="chairCount() > 1" ng-click="removeCommitteeChair()" class="glyphicon glyphicon-minus-sign" style="text-decoration: none;"></a></span>
			<span class="top" title="Add committee chair field"><a ng-click="addCommitteeChair()" class="glyphicon glyphicon-plus-sign" style="text-decoration: none;"></a></span>					
			<ul class="list-unstyled">
				<li ng-repeat="member in document.metadata.chair track by $index">
					<label>{{$index+1}}:</label>
					<input type="text" ng-model="document.metadata.chair[$index]"/>
				</li>
			</ul>
		</div>
		<div class="row">
			<span class="h3 pull left">
				Committee members
			</span>
			<span class="top" title="Remove committee member field"><a ng-if="memberCount() > 1" ng-click="removeCommitteeMember()" class="glyphicon glyphicon-minus-sign" style="text-decoration: none;"></a></span>
			<span class="top" title="Add committee member field"><a ng-click="addCommitteeMember()" class="glyphicon glyphicon-plus-sign" style="text-decoration: none;"></a></span>					
			<ul class="list-unstyled">
				<li ng-repeat="member in document.metadata.committee track by $index">
					<label>{{$index+1}}:</label>
					<input type="text" ng-model="document.metadata.committee[$index]"/>
				</li>
			</ul>
		</div>
		<div class="row">			
			<div ng-if="isAnnotator() || (isManager() && managerAnnotating())" style="float: right;">
				<button class="btn btn-default" ng-click="requiresCuration(document.filename)">
					Requires Curation
				</button>
				<button class="btn btn-default" ng-click="updateMetadata(document.filename)">
					Save
				</button>
				<button class="btn btn-default" ng-if="readyToSubmit()" ng-click="submit(document.filename)">
					Submit
				</button>
			</div>
			<div ng-if="isAdmin() || (isManager() && managerReviewing())" style="float: right;">
				<button class="btn btn-default" ng-click="requiresCuration(document.filename)">
					Requires Curation
				</button>
				<button class="btn btn-default" ng-click="accept(document)">
					Accept
				</button>
				<button class="btn btn-default" ng-click="reject(document)">
					Reject
				</button>
			</div>
		</div>		
	</div>
	
	<modal id="notesModal" title="Rejection Notes" visible="showModal" style="display:none;">			
		<form role="form">
			<div class="form-group">
				<label>Please indicate which metadata fields need modification: </label>			
				<textarea ng-model="rejectionNotes" rows="4" cols="75" placeholder="Enter notes"></textarea>
				<br/><br/>
				<button class="btn btn-default" ng-click="submitRejection(document, rejectionNotes)">
					Submit
				</button>
				<span ng-if="!rejectionNotes">
					{{validation}}
				</span>
			</div>
		</form>
	</modal>
			
</div>
